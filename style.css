:root {
  --bg: #000000;
  --bg-alt: #0d1117;
  --panel-bg: rgba(16,16,20,0.72);
  --panel-bg-solid: #12161e;
  --panel-glow: rgba(99,102,241,0.25);
  --border: rgba(255,255,255,0.08);
  --border-subtle: rgba(255,255,255,0.04);
  --text: #f5f7fa;
  --muted: #858b93;
  --accent-1: #00d4ff;
  --accent-2: #0099ff;
  --accent-3: #6366f1;
  --accent-4: #a855f7;
  --accent-5: #ec4899;
  --accent-gradient: linear-gradient(135deg,var(--accent-1),var(--accent-2),var(--accent-3),var(--accent-4));
  --success: #10b981;
  --focus-ring: #6366f1;
  --radius-sm: 6px;
  --radius-md: 14px;
  --radius-lg: 20px;
  --radius-xl: 32px;
  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-5: 20px;
  --space-6: 24px;
  --space-7: 28px;
  --space-8: 32px;
  --card-min-width: 520px;
  --card-max-width: 1200px;
  --card-min-height: 680px;
  --card-max-height: 1000px;
  --blur-bg: 30px;
  --shadow-lg: 0 30px 60px -15px rgba(0,0,0,0.7);
  --shadow-hover: 0 40px 90px -20px rgba(0,0,0,0.9);
  --transition-base: 0.35s cubic-bezier(.4,0,.2,1);
}
* { box-sizing: border-box; }
html { height: 100%; }
body {
  min-height: 100dvh;
  margin: 0;
  font-family: -apple-system,BlinkMacSystemFont,'SF Pro Display','Segoe UI',Roboto,Arial,sans-serif;
  font-size: 16px;
  line-height: 1.4;
  background: #000 url('background.jpeg') center/cover fixed no-repeat;
  color: var(--text);
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
  position:relative;
}
body::before{
  content:'';position:fixed;inset:0;background:rgba(0,0,0,0.55);pointer-events:none;z-index:0;
}
body::after{
  content:'';
  position:fixed;
  inset:0;
  background:url('background.jpeg') center/cover no-repeat;
  filter:blur(28px) brightness(0.85) saturate(120%);
  transform:scale(1.05);
  z-index:-1;
  will-change:filter,transform;
}
:focus-visible {
  outline: 2px solid var(--focus-ring);
  outline-offset: 3px;
}
#loading-screen {
  position: fixed;
  inset: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background: radial-gradient(circle at 50% 40%, #121929 0%, #060707 70%);
  transition: opacity var(--transition-base), visibility var(--transition-base);
  z-index: 1000;
}
#loading-screen.hidden { opacity: 0; visibility: hidden; }
.loading-logo {
  font-size: clamp(48px,12vw,92px);
  font-weight: 700;
  letter-spacing: -2px;
  background: linear-gradient(120deg,var(--accent-1),var(--accent-3),var(--accent-4));
  -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;
  animation: logoGlow 3.2s ease-in-out infinite;
}
@keyframes logoGlow { 0%,100% { filter: drop-shadow(0 0 18px var(--panel-glow)); } 50% { filter: drop-shadow(0 0 28px rgba(168,85,247,0.55)); } }
.loading-bar-container {
  width: 260px; height: 6px; border-radius: 4px;
  background: var(--border-subtle);
  overflow: hidden; position: relative;
}
.loading-progress {
  height: 100%; width: 0%;
  background: linear-gradient(90deg,var(--accent-1),var(--accent-3),var(--accent-4));
  background-size: 200% 100%;
  animation: loadingProgress 2.4s cubic-bezier(.4,0,.2,1) forwards, progressShift 1.6s linear infinite;
}
@keyframes loadingProgress { to { width:100%; } }
@keyframes progressShift { 0%,100% { background-position:0 50%; } 50% { background-position:100% 50%; } }
.loading-text { margin-top: var(--space-5); font-size: 14px; color: var(--muted); letter-spacing: 1px; animation: fadePulse 2.6s ease-in-out infinite; }
@keyframes fadePulse { 0%,100% { opacity: .45; } 50% { opacity: 1; } }
#main-app {
  opacity: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: clamp(var(--space-3),3vw,var(--space-7));
  min-height: 100dvh;
  transition: opacity 0.9s ease;
  position: relative;
  isolation: isolate;
}
#main-app.visible { opacity: 1; }
.bg-orb { position: fixed; border-radius: 50%; filter: blur(100px); opacity: .18; mix-blend-mode: plus-lighter; pointer-events: none; animation: orbFloat 18s ease-in-out infinite; }
.orb-1 { width: 520px; height: 520px; background: radial-gradient(circle,var(--accent-1),transparent); top:-160px; left:-160px; }
.orb-2 { width: 440px; height: 440px; background: radial-gradient(circle,var(--accent-3),transparent); bottom:-140px; right:-140px; animation-delay: 4s; }
.orb-3 { width: 360px; height: 360px; background: radial-gradient(circle,var(--accent-4),transparent); top:50%; left:50%; transform:translate(-50%,-50%); animation-delay: 8s; }
@keyframes orbFloat { 0%,100% { transform: translate(0,0) scale(1); } 33% { transform: translate(40px,-40px) scale(1.08); } 66% { transform: translate(-40px,40px) scale(.92); } }
.chat-container {
  width: clamp(var(--card-min-width),82vw,var(--card-max-width));
  height: clamp(var(--card-min-height),90dvh,var(--card-max-height));
  display: flex; flex-direction: column;
  background: var(--panel-bg);
  backdrop-filter: blur(var(--blur-bg)) saturate(170%);
  border: 1px solid var(--border);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-lg), 0 0 0 1px rgba(255,255,255,0.03) inset;
  position: relative; overflow: hidden;
  transition: transform var(--transition-base), box-shadow var(--transition-base);
  will-change: transform;
}
.chat-container:hover { transform: translateY(-4px); box-shadow: var(--shadow-hover), 0 0 0 1px rgba(255,255,255,0.05) inset, 0 0 90px -20px var(--panel-glow); }
.chat-header { padding: var(--space-7) var(--space-8); display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid var(--border-subtle); background: linear-gradient(180deg,rgba(255,255,255,0.04) 0%, transparent 100%); }
.header-left { display:flex; align-items:center; gap: var(--space-4); }
.header-icon { width:48px; height:48px; border-radius: var(--radius-md); background: var(--accent-gradient); display:flex; align-items:center; justify-content:center; font-size:24px; box-shadow: 0 6px 20px -4px var(--panel-glow), 0 0 0 1px rgba(255,255,255,0.10) inset; transition: var(--transition-base); }
.chat-container:hover .header-icon { transform: rotate(8deg) scale(1.05); }
.header-content h1 { margin:0 0 2px; font-size: 24px; font-weight:600; letter-spacing:-.5px; background: linear-gradient(120deg,#ffffff,#cfcfcf); -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent; }
.header-subtitle { font-size:13px; color: var(--muted); letter-spacing:.4px; }
.status-indicator { display:flex; align-items:center; gap: var(--space-2); padding: var(--space-2) var(--space-4); background: rgba(16,185,129,0.12); border:1px solid rgba(16,185,129,0.30); border-radius: 24px; font-size:12px; font-weight:500; color: var(--success); letter-spacing:.5px; }
.status-dot { width:8px; height:8px; border-radius:50%; background: var(--success); box-shadow:0 0 10px rgba(16,185,129,0.7); animation: statusPulse 2.2s ease-in-out infinite; }
@keyframes statusPulse { 0%,100% { transform:scale(1); opacity:1; } 50% { transform:scale(.85); opacity:.7; } }
.messages { flex:1; overflow-y:auto; padding: var(--space-8); scroll-behavior: smooth; }
.messages::-webkit-scrollbar { width: 6px; }
.messages::-webkit-scrollbar-track { background: transparent; }
.messages::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.14); border-radius: 3px; }
.messages::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.26); }
.welcome-message { text-align:center; padding: clamp(40px,14vh,80px) 16px; opacity:.85; }
.welcome-icon { font-size: clamp(40px,10vw,60px); margin-bottom: var(--space-5); animation: welcomeFloat 3.3s ease-in-out infinite; }
@keyframes welcomeFloat { 0%,100% { transform:translateY(0); } 50% { transform:translateY(-10px); } }
.welcome-message h2 { margin:0 0 12px; font-size: clamp(22px,3.2vw,30px); font-weight:600; letter-spacing:-.5px; background: linear-gradient(120deg,#ffffff,#b4b4b4); -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent; }
.welcome-message p { margin:0; font-size:15px; color: var(--muted); line-height:1.6; }
.message { display:flex; margin-bottom: var(--space-7); opacity:0; animation: messageReveal .55s cubic-bezier(.34,1.56,.64,1) forwards; }
@keyframes messageReveal { from { opacity:0; transform: translateY(28px) scale(.92); } to { opacity:1; transform: translateY(0) scale(1); } }
.message.user { flex-direction: row-reverse; }
.message-avatar { width:40px; height:40px; border-radius: var(--radius-md); background: linear-gradient(135deg,var(--accent-1),var(--accent-3)); display:flex; align-items:center; justify-content:center; font-size:20px; flex-shrink:0; box-shadow:0 4px 14px -4px var(--panel-glow); transition: var(--transition-base); }
.message.user .message-avatar { background: linear-gradient(135deg,var(--accent-4),var(--accent-5)); }
.message-avatar:hover { transform: scale(1.1) rotate(5deg); }
.message-content { max-width: clamp(55%, 700px, 70%); margin: 0 var(--space-4); }
.message-bubble { padding: var(--space-4) var(--space-5); border-radius: var(--radius-lg); font-size:15px; line-height:1.55; word-wrap: break-word; position: relative; transition: var(--transition-base); }
.message-bubble:hover { transform: translateY(-2px); }
.message.bot .message-bubble { background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.10); color: var(--text); border-bottom-left-radius: var(--radius-sm); box-shadow: 0 4px 16px -2px rgba(0,0,0,0.3); }
.message.user .message-bubble { background: linear-gradient(135deg,var(--accent-1),var(--accent-2),var(--accent-3)); color:#fff; border-bottom-right-radius: var(--radius-sm); box-shadow: 0 4px 20px -4px var(--panel-glow); }
.message-time { margin-top: var(--space-2); font-size:11px; color: var(--muted); letter-spacing:.3px; opacity:.65; }
.message.user .message-time { text-align:right; }
.typing-indicator { display:flex; margin-bottom: var(--space-7); opacity:0; animation: messageReveal .55s cubic-bezier(.34,1.56,.64,1) forwards; }
.typing-bubble { margin-left:56px; padding: var(--space-4) var(--space-5); border-radius: var(--radius-lg); border-bottom-left-radius: var(--radius-sm); background: rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.10); display:flex; gap:6px; align-items:center; }
.typing-dot { width:8px; height:8px; border-radius:50%; background: var(--muted); animation: typingAnimation 1.4s ease-in-out infinite; }
.typing-dot:nth-child(2) { animation-delay:.2s; }
.typing-dot:nth-child(3) { animation-delay:.4px; }
@keyframes typingAnimation { 0%,60%,100% { transform:translateY(0); opacity:.5; } 30% { transform:translateY(-10px); opacity:1; } }
.input-area { padding: var(--space-7) var(--space-8) var(--space-8); border-top:1px solid var(--border-subtle); background: linear-gradient(0deg,rgba(255,255,255,0.03) 0%, transparent 100%); }
.input-wrapper { display:flex; gap: var(--space-3); align-items:flex-end; background: rgba(255,255,255,0.045); border:1px solid var(--border); border-radius: var(--radius-lg); padding: var(--space-2); transition: var(--transition-base); }
.input-wrapper:focus-within { background: rgba(255,255,255,0.07); border-color: var(--focus-ring); box-shadow: 0 0 0 3px rgba(99,102,241,0.15); transform: translateY(-2px); }
#message-input { flex:1; background: transparent; border:none; color: var(--text); font-size:15px; font-family:inherit; resize:none; outline:none; padding: var(--space-3) var(--space-4); max-height: 160px; line-height:1.5; }
#message-input::placeholder { color: var(--muted); }
#send-btn { width:48px; height:48px; border-radius:50%; background: linear-gradient(135deg,var(--accent-1),var(--accent-2),var(--accent-3)); border:none; color:#fff; cursor:pointer; font-size:20px; display:flex; align-items:center; justify-content:center; position:relative; box-shadow: 0 4px 18px -4px var(--panel-glow); transition: var(--transition-base); }
#send-btn::before { content:''; position:absolute; inset:0; background: radial-gradient(circle,rgba(255,255,255,0.35),transparent 70%); opacity:0; transition: opacity .3s ease; }
#send-btn:hover { transform: scale(1.1) rotate(5deg); box-shadow: 0 10px 30px -6px var(--panel-glow); }
#send-btn:hover::before { opacity:1; }
#send-btn:active { transform: scale(.95) rotate(5deg); }
#send-btn.sending { pointer-events:none; animation: sendingPulse 1.2s ease-in-out infinite; }
@keyframes sendingPulse { 0%,100% { transform:scale(1); box-shadow:0 4px 18px -4px var(--panel-glow); } 50% { transform:scale(1.05); box-shadow:0 10px 34px -6px var(--panel-glow); } }
.spinner { display:none; width:22px; height:22px; border:3px solid rgba(255,255,255,0.3); border-top-color:#fff; border-radius:50%; animation: spin .7s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }
#send-btn.sending .spinner { display:block; }
#send-btn.sending .send-icon { display:none; }
.toast{position:absolute;top:12px;right:12px;min-width:200px;max-width:320px;padding:12px 16px;border-radius:12px;font-size:14px;line-height:1.4;background:rgba(220,38,38,0.12);color:#ffb4b4;border:1px solid rgba(220,38,38,0.4);backdrop-filter:blur(18px);opacity:0;transform:translateY(-10px) scale(.95);transition:.35s cubic-bezier(.4,0,.2,1);box-shadow:0 8px 28px -6px rgba(0,0,0,.5)}.toast.show{opacity:1;transform:translateY(0) scale(1)}.toast.hide{opacity:0;transform:translateY(-8px) scale(.95)}.toast-error{} .toast-success{background:rgba(16,185,129,0.12);color:#8ff3cf;border-color:rgba(16,185,129,0.4)}
.spotify-logo{display:flex;align-items:center;justify-content:center;width:34px;height:34px;border-radius:50%;background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.12);box-shadow:0 2px 8px -2px rgba(0,0,0,.5);transition:var(--transition-base);}
.spotify-logo:hover{background:rgba(255,255,255,0.16);transform:scale(1.07);}
.spotify-player{display:flex;align-items:center;gap:10px;}
#spotify-login-btn{background:linear-gradient(135deg,var(--accent-3),var(--accent-4));color:#fff;border:none;padding:10px 16px;font-size:13px;border-radius:24px;cursor:pointer;font-weight:500;letter-spacing:.4px;box-shadow:0 4px 14px -4px var(--panel-glow);transition:var(--transition-base);}
#spotify-login-btn:hover{transform:translateY(-2px);box-shadow:0 10px 30px -6px var(--panel-glow);}
#spotify-login-btn:active{transform:translateY(0);}
.spotify-track{display:flex;align-items:center;gap:12px;background:rgba(255,255,255,0.05);border:1px solid var(--border-subtle);padding:8px 14px;border-radius:18px;box-shadow:0 4px 14px -6px rgba(0,0,0,.4);}
.spotify-track img{width:44px;height:44px;border-radius:10px;object-fit:cover;box-shadow:0 4px 10px -4px rgba(0,0,0,.6);}
.spotify-meta{display:flex;flex-direction:column;min-width:120px;max-width:160px;}
.spotify-title{font-size:13px;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.spotify-artist{font-size:11px;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.spotify-controls{display:flex;align-items:center;gap:6px;}
.sp-btn{background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.14);color:#fff;width:32px;height:32px;border-radius:50%;cursor:pointer;font-size:14px;display:flex;align-items:center;justify-content:center;transition:var(--transition-base);}
.sp-btn:hover{background:rgba(255,255,255,0.18);transform:scale(1.07);}
.sp-btn:active{transform:scale(.92);}
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after { animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; transition: none !important; }
}
@media (max-width: 900px) {
  .chat-container { width: 100%; height: 100dvh; border-radius: 0; }
  .chat-header { padding: var(--space-6) var(--space-6); }
  .messages { padding: var(--space-6); }
  .input-area { padding: var(--space-6); }
}
@media (max-width: 600px) {
  .header-icon { width:40px; height:40px; font-size:20px; }
  .header-content h1 { font-size: 20px; }
  .status-indicator { display:none; }
  .messages { padding: var(--space-5); }
  .message-content { max-width: 82%; }
  .input-area { padding: var(--space-5) var(--space-5) var(--space-6); }
}
@media (max-width: 420px) {
  .message-bubble { font-size:14px; }
  .loading-logo { font-size: 56px; }
}
.bot-avatar-img{width:100%;height:100%;object-fit:cover;border-radius:inherit;display:block;}
